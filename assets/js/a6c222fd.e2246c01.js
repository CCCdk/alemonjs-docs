"use strict";(self.webpackChunkalemonjs_docs=self.webpackChunkalemonjs_docs||[]).push([[263],{7557:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=s(4848),t=s(8453);const o={sidebar_position:4},c="\u94a9\u5b50",i={id:"alemonjsDocs/basic/hook",title:"\u94a9\u5b50",description:"\u5728\u7279\u5b9a\u4e8b\u4ef6\u6216\u72b6\u6001\u4e0b\u8c03\u7528\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u7279\u5b9a\u7684\u751f\u547d\u5468\u671f\u6216\u4e8b\u4ef6\u53d1\u751f\u65f6\u63d2\u5165\u81ea\u5b9a\u4e49\u884c\u4e3a\u3002",source:"@site/docs/alemonjsDocs/basic/4-hook.md",sourceDirName:"alemonjsDocs/basic",slug:"/alemonjsDocs/basic/hook",permalink:"/docs/alemonjsDocs/basic/hook",draft:!1,unlisted:!1,editUrl:"https://github.com/lemonade-lab/alemonjs-docs/tree/main/docs/alemonjsDocs/basic/4-hook.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\u4e8b\u4ef6\u7c7b\u578b",permalink:"/docs/alemonjsDocs/basic/message-type"},next:{title:"\u4e8b\u4ef6\u54cd\u5e94API",permalink:"/docs/alemonjsDocs/basic/api"}},d={},l=[{value:"<code>useSend</code>",id:"usesend",level:3},{value:"<code>usePrase</code>",id:"useprase",level:3},{value:"<code>useObserver</code>",id:"useobserver",level:2}];function a(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u94a9\u5b50",children:"\u94a9\u5b50"})}),"\n",(0,r.jsx)(n.admonition,{title:"\u94a9\u5b50\uff08Hook\uff09",type:"info",children:(0,r.jsx)(n.p,{children:"\u5728\u7279\u5b9a\u4e8b\u4ef6\u6216\u72b6\u6001\u4e0b\u8c03\u7528\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u7279\u5b9a\u7684\u751f\u547d\u5468\u671f\u6216\u4e8b\u4ef6\u53d1\u751f\u65f6\u63d2\u5165\u81ea\u5b9a\u4e49\u884c\u4e3a\u3002"})}),"\n",(0,r.jsx)(n.p,{children:"Alemon.js \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u79cd\u94a9\u5b50\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"usesend",children:(0,r.jsx)(n.code,{children:"useSend"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useSend"})," \u5141\u8bb8\u5f00\u53d1\u8005\u5728\u54cd\u5e94\u7279\u5b9a\u4e8b\u4ef6\uff08\u5982\u63a5\u6536\u5230\u6d88\u606f\uff09\u65f6\uff0c\u53d1\u9001\u6d88\u606f\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u901a\u8fc7\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"useSend"}),"\uff0c\u5f00\u53d1\u8005\u80fd\u591f\u83b7\u53d6\u53d1\u9001\u6d88\u606f\u7684\u529f\u80fd\uff0c\u8fd9\u79cd\u83b7\u53d6\u901a\u5e38\u5728\u4e00\u4e2a\u7279\u5b9a\u7684\u4e8b\u4ef6\u5904\u7406\u4e0a\u4e0b\u6587\u4e2d\u8fdb\u884c\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="\u53d1\u9001\u6d88\u606f\u793a\u4f8b"',children:"import { useSend, Text, At, Image } from 'alemonjs'\r\n\r\nexport default OnResponse(\r\n  async e => {\r\n    const Send = useSend(e)\r\n\r\n    // \u53d1\u9001\u6587\u672c\r\n    Send(Text('Hello World!'))\r\n\r\n    // \u53d1\u9001 @ \u63d0\u53ca\r\n    Send(At('123456'))\r\n\r\n    // \u53d1\u9001\u591a\u79cd\u7c7b\u578b\u7684\u6d88\u606f\r\n    Send(Text('Hello '), At('123456'), Text(', How are things going?'))\r\n\r\n    // \u53d1\u9001\u56fe\u7247\r\n    const img: Buffer = null // \u8fd9\u91cc\u9700\u8981\u6b63\u786e\u521d\u59cb\u5316 Buffer\r\n    Send(Image(img))\r\n\r\n    // \u53d1\u9001\u672c\u5730\u56fe\u7247\u6587\u4ef6\r\n    Send(Image('./public/test.jpg', 'file'))\r\n  },\r\n  'message.create',\r\n  /^(#|\\/)?\u70bc\u4e39\u5e08\u5b66\u5f92$/\r\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"useprase",children:(0,r.jsx)(n.code,{children:"usePrase"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useParse"})," \u7528\u4e8e\u89e3\u6790\u548c\u63d0\u53d6\u63a5\u6536\u5230\u7684\u6d88\u606f\u5185\u5bb9\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728\u7279\u5b9a\u7684\u4e8b\u4ef6\u5904\u7406\u8fc7\u7a0b\u4e2d\uff08\u4f8b\u5982\u6536\u5230\u4e00\u6761\u6d88\u606f\u65f6\uff09\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"useParse"})," \u6765\u83b7\u53d6\u6d88\u606f\u7684\u5177\u4f53\u5185\u5bb9\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'tltle="\u89e3\u6790\u6d88\u606f\u793a\u4f8b"',children:"import { useParse } from 'alemonjs'\r\n\r\nexport default OnResponse(\r\n  async e => {\r\n    // \u89e3\u6790\u7528\u6237\u6d88\u606f\r\n    const text = useParse(e.Msgs, 'Text')\r\n    if (!text) {\r\n      return // \u6d88\u606f\u4e3a\u7a7a\r\n    }\r\n\r\n    const ats = useParse(e.Msgs, 'At')\r\n    if (!ats || ats.length === 0) {\r\n      return // @ \u63d0\u53ca\u4e3a\u7a7a\r\n    }\r\n\r\n    // \u67e5\u627e\u7528\u6237\u7c7b\u578b\u7684 @ \u63d0\u53ca\uff0c\u4e14\u4e0d\u662f bot\r\n    const UserID = ats.find(item => item.typing === 'user' && !item.bot)?.value\r\n    if (!UserID) {\r\n      return // \u672a\u627e\u5230\u7528\u6237ID\r\n    }\r\n\r\n    // \u5904\u7406\u7528\u6237ID\u903b\u8f91\r\n  },\r\n  'message.create',\r\n  /^(#|\\/)?\u70bc\u4e39\u5e08\u5b66\u5f92$/\r\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"useobserver",children:(0,r.jsx)(n.code,{children:"useObserver"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff0c\u76d1\u542c\u5e76\u54cd\u5e94\u67d0\u4e2a\u4e8b\u4ef6\u3002\u89c2\u5bdf\u4e8b\u4ef6\u793a\u4f8b"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { Text, useObserver, useParse, useSend } from 'alemonjs'\r\n\r\nexport default OnResponse(\r\n  event => {\r\n    const Send = useSend(event)\r\n    Send(Text('\u8bf7\u8f93\u5165\u5bc6\u7801'))\r\n\r\n    // \u521b\u5efa\u89c2\u5bdf\u8005\r\n    const Observer = useObserver(event, 'message.create')\r\n    Observer(\r\n      (event, { next }) => {\r\n        const Send = useSend(event)\r\n        const text = useParse(event.Megs, 'Text')\r\n\r\n        if (text === '123456') {\r\n          Send(Text('\u5bc6\u7801\u6b63\u786e'))\r\n        } else {\r\n          Send(Text('\u5bc6\u7801\u4e0d\u6b63\u786e'))\r\n          next() // \u7ee7\u7eed\u76d1\u542c\u4e0b\u4e00\u4e2a\u6d88\u606f\r\n        }\r\n      },\r\n      ['UserId'] // \u76d1\u542c\u5f53\u524d\u7528\u6237\u7684\u4e0b\u4e00\u4e2a\u6d88\u606f\r\n    )\r\n  },\r\n  'message.create',\r\n  /\u6d4b\u8bd5/\r\n)\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>i});var r=s(6540);const t={},o=r.createContext(t);function c(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);